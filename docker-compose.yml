services:
  whisper-stt:
    build:
      context: ./Whisper-STT
    ports:
      - "5002:5001"
    container_name: whisper-stt
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: all
              capabilities: [gpu]

  deepseek:
    build:
      context: ./DeepSeek
    ports:
      - "5000:30000"
    container_name: deepseek
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: all
              capabilities: [gpu]

  vectordb:
    build:
      context: ./VectorDB
    ports:
      - "5001:5001"
    container_name: vector-db

  nginx:
    image: nginx:latest
    container_name: nginx
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
    depends_on:
      - deepseek
      - whisper-stt
      - vectordb